doctype html
html(lang="es")
    head
        title #{title || 'hlas'}
        link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css")
        link(href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet")

        style.
            .product-card {
                height: 100%;
                transition: transform 0.2s;
            }
            .product-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            }
            .category-badge {
                position: absolute;
                top: 10px;
                right: 10px;
            }
            .product-image {
                height: 200px;
                object-fit: cover;
            }
            .search-bar {
                max-width: 500px;
                margin: 0 auto;
            }
            .category-image {
                width: 80px;
                height: 80px;
                object-fit: cover;
                border-radius: 10px;
                transition: all 0.3s ease;
                    }
             @media (min-width: 1440px) {
                .category-image {
                   width: 120px;
                   height: 120px;
                  }
            }

            .category-image:hover {
                border-radius: 50%;
                transform: scale(1.6);
                cursor: pointer;
                    }

            .d-flex.flex-nowrap {
                padding: 10px;
                }
                .category.name{
                    font-size: 1px;
                }
                .text-2px {
                    font-size: 10px;
                }
                .navbar.navbar-expand-lg {
                    background-color: white; /* Fondo blanco */
                    color: #426abc; /* Color de texto */
                    border-bottom: 1px solid black; /* Línea en la parte baja */
                }

                .navbar.navbar-expand-lg .navbar-nav .nav-link {
                    color: #334488; /* Color de las letras */
                    font-weight: bold; /* Hacer las letras más gruesas */
                    transition: all 0.3s ease; /* Suavizar los cambios */

                }

                .navbar.navbar-expand-lg .navbar-nav .nav-link:hover {
                    color: #2a4a8b; /* Cambiar a un tono más oscuro al pasar el cursor */
                    text-decoration: none; /* Eliminar subrayado */
                    letter-spacing: 1px; /* Añadir espaciado entre letras como efecto */
                    transform: scale(1.1); /* Ampliar ligeramente las letras al pasar el cursor */
                }

                .navbar .navbar-brand img {
                    height: 50px; /* Asegurando el tamaño de la imagen */
                }

                .navbar .form-control {
                    border: 1px solid #426abc; /* Borde de la barra de búsqueda */
                }

                .navbar .btn-outline-primary {
                    color: #426abc;
                    border-color: #426abc;
                }

                .navbar .btn-outline-primary:hover {
                    background-color: #426abc;
                    color: #ffffff;
                }
                form.d-flex.search-bar {
                  max-width: 500px; /* Ajustar el ancho del buscador */
                   margin: 0 auto; /* Centrar el formulario */
                }

                form.d-flex.search-bar .form-control {
                    border: 2px solid #334488; /* Bordes en el color solicitado */
                    border-radius: 20px; /* Bordes redondeados */
                    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1); /* Sombra ligera para un efecto moderno */
                    transition: border-color 0.3s ease, box-shadow 0.3s ease; /* Suavizar el cambio de estado */
                }
                
                form.d-flex.search-bar .form-control:focus {
                    border-color: #2a4a8b; /* Cambiar a un tono más oscuro al enfocar */
                    box-shadow: 0px 4px 8px rgba(66, 107, 188, 0.4); /* Resaltar sombra al enfocar */
                    outline: none; /* Eliminar el contorno predeterminado */
                }
                
                form.d-flex.search-bar .btn {
                    background-color: #334488; /* Fondo del botón */
                    color: #ffffff; /* Texto blanco */
                    border: none; /* Sin bordes */
                    border-radius: 20px; /* Bordes redondeados */
                    padding: 0.5rem 1.5rem; /* Espaciado interno */
                    font-weight: bold; /* Texto más grueso */
                    transition: background-color 0.3s ease, transform 0.2s ease; /* Suavizar cambios */
                }
                
                form.d-flex.search-bar .btn:hover {
                    background-color: #2a4a8b; /* Fondo más oscuro al pasar el cursor */
                    transform: scale(1.05); /* Ampliar ligeramente el botón */
                }
                .carousel-item {
                     padding-bottom:30px; 
                }
                 
                .product-card {
                     transition: transform 0.3s ease;
                }
                 
                .product-card:hover {
                     transform: scale(1.05); /* Agrandar un poco las tarjetas al pasar el mouse */
                }
                 
                .carousel-control-prev-icon, .carousel-control-next-icon {
                     background-color: #426abc; /* Color azul para los íconos de navegación */
                }
                .card.product-card {
                  height: 500px; /* Altura fija de la tarjeta */
                  display: flex;
                  flex-direction: column;
                  justify-content: space-between; /* Asegura que los elementos dentro de la tarjeta se distribuyan bien */
                  padding: 10px; /* Añadir padding para mayor espacio dentro de las tarjetas */
                  overflow: hidden; /* Asegura que el contenido que sobrepase no se muestre */
                }    
                .card-img-top.product-image {
                  height: 320px; /* Altura de la imagen dentro de la tarjeta */
                  width: 100%; /* Asegura que la imagen ocupe el 100% del ancho de la tarjeta */
                 object-fit: cover; /* Mantiene la proporción de la imagen sin distorsionarla */
                }           
                
                /* Estilo adicional para la tarjeta cuando el mouse pasa por encima */
                .card.product-card:hover {
                    transform: scale(1.05); /* Agrandar la tarjeta al pasar el mouse */
                    transition: transform 0.3s ease-in-out;
                }
                
                /* Estilo para los productos dentro del carrusel */
             
                
                /* Espaciado adicional entre las tarjetas del carrusel */
                
                
                /* Estilo para los controles de navegación del carrusel */
                .carousel-control-prev-icon, .carousel-control-next-icon {
                    background-color: black; /* Color de las flechas negro */
                    width: 30px; /* Tamaño de la flecha */
                    height: 40px; /* Tamaño de la flecha */
                }
                
                /* Posicionar los controles de navegación sobre las tarjetas */
                .carousel-control-prev, .carousel-control-next {
                    top: 50%; /* Centrado vertical */
                    transform: translateY(-50%); /* Centrado vertical exacto */
                    width: 5%; /* Asegura que las flechas estén a los costados */
                }
                h2.text-center.mb-4::after {
                    content: '';
                    display: block;
                    width: 80%;
                    height: 2px;
                    background-color: #334488;
                    margin: 5px auto 0; /* Espaciado superior ajustado */
                }









    body
        nav.navbar.navbar-expand-lg.navbar-light.bg-light
            .container-fluid
                a.navbar-brand(href='/') 
                 img(src='/images/logo_principal.gif' alt='Mi Tienda de Juguetes' style="height: 50px;")
                button.navbar-toggler(type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent")
                    span.navbar-toggler-icon

                #navbarContent.collapse.navbar-collapse
                    ul.navbar-nav.me-auto.mb-2.mb-lg-0
                        li.nav-item
                            a.nav-link(href='/catalogo') Catálogo
                        li.nav-item.dropdown
                            a.nav-link.dropdown-toggle(href="#" role="button" data-bs-toggle="dropdown") Categorías
                            ul.dropdown-menu
                                each category in categories
                                    li
                                        a.dropdown-item(href=`/category/${category.id}/products`)= category.name

                    form.d-flex.search-bar(action="/search" method="GET")
                        input.form-control.me-2(type="search" placeholder="Buscar productos..." name="q")
                        button.btn.btn-outline-primary(type="submit") Buscar

                    //- Sección de usuario
                    .d-flex.align-items-center
                        if user
                            .dropdown
                                a.nav-link.dropdown-toggle.d-flex.align-items-center(href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false")
                                    .me-2
                                        if user.imagen
                                            img.rounded-circle(src=user.imagen alt=user.username style="width: 32px; height: 32px; object-fit: cover;")
                                        else
                                            i.bi.bi-person-circle.fs-4
                                    span.d-none.d-md-inline= user.username
                                ul.dropdown-menu.dropdown-menu-end
                                    li
                                        a.dropdown-item(href='/users/show')
                                            i.bi.bi-person.me-2
                                            | Mi Perfil
                                    li
                                        hr.dropdown-divider
                                    li
                                        a.dropdown-item(href='/logout')
                                            i.bi.bi-box-arrow-right.me-2
                                            | Cerrar Sesión
                        else
                            - console.log('No hay usuario en la sesión')
                            a.btn.btn-primary(href='/login')
                                i.bi.bi-box-arrow-in-right.me-2
                                | Iniciar Sesión

                        //- Botón del carrito siempre visible
                        .ms-2
                            a.btn.btn-outline-primary.position-relative(href='/cart')
                                i.bi.bi-cart3
                                if cartItemCount && cartItemCount > 0
                                    span.position-absolute.top-0.start-100.translate-middle.badge.rounded-pill.bg-danger= cartItemCount
                                    span.visually-hidden items en el carrito


    .carousel.slide(data-bs-ride="carousel")
        .carousel-inner
            .carousel-item.active
                img.d-block.w-100(src="/images/carrousel/imagen1.png", alt="Imagen 1", style="height: 300px; object-fit: cover;")
                .carousel-caption.d-flex.justify-content-center.align-items-end(style="bottom: 50px;  width: 100%;")
                    a.btn.btn-light.text-dark(style="margin-left: 250px; border-radius: 15px;" href="/category/9/products") Ver Más
            .carousel-item
                img.d-block.w-100(src="/images/carrousel/imagen2.png", alt="Imagen 2", style="height: 300px; object-fit: cover;")
                .carousel-caption.d-flex.justify-content-center.align-items-end(style="bottom: 50px;  width: 100%;")
                    a.btn.btn-light.text-dark(style="margin-left: -370px; border-radius: 15px;" href="/category/9/products") Ver Más
            .carousel-item
                img.d-block.w-100(src="/images/carrousel/imagen3.png", alt="Imagen 3", style="height: 300px; object-fit: cover;")
                .carousel-caption.d-flex.justify-content-center.align-items-end(style="bottom: 50px; width: 100%;")
                   a.btn.btn-light.text-dark(style="margin-left:150px; transform: translateY(50px); border-radius: 15px;" href="/category/1/products") Ver Más
        button.carousel-control-prev(type="button", data-bs-target=".carousel", data-bs-slide="prev")
            span.carousel-control-prev-icon(aria-hidden="true")
            span.visually-hidden Anterior
        button.carousel-control-next(type="button", data-bs-target=".carousel", data-bs-slide="next")
            span.carousel-control-next-icon(aria-hidden="true")
            span.visually-hidden Siguiente

    p.lead 

        .container-fluid
            section.mb-5.text-center.d-flex.justify-content-center.flex-wrap
                    each category in categories
                        .text-center.mx-7
                            a(href=`/category/${category.id}/products`)
                                img.category-image(
                                src=`/images/logos/${category.id}.png` 
                                alt=category.name
                        )
                            h6.mt-2.text-2px= category.name
            section.mb-5
                h2.text-center.mb-4(style="color: #334488; position: relative;") PRODUCTOS DESTACADOS
                
                .carousel.slide#productCarousel(data-bs-ride="carousel")
                    .carousel-inner
                        // Sección de productos, cada "carousel-item" tendrá 4 productos
                        each product, index in products
                            // Agrupar productos en bloques de 4
                            - var start = Math.floor(index / 4) * 4
                            - var end = start + 4
                            if (index % 4 === 0)
                                .carousel-item(class=(index === 0 ? 'active' : ''))
                                    .row.g-4
                                        each product in products.slice(start, end)
                                            .col-md-3  
                                                .card.product-card
                                                    if product.categoryId
                                                        - var category = categories.find(function(c) { return c.id === product.categoryId })
                                                        span.badge.bg-primary.category-badge(style="background-color: #3D707C !important; color: white;")
                                                            = category ? category.name : 'Sin categoría'
            
                                                    if product.thumbnail
                                                        img.card-img-top.product-image(style="height: 300px; object-fit: cover;" src=product.thumbnail alt=product.name)
                                                    else
                                                        img.card-img-top.product-image(style="height: 300px; object-fit: cover;" src='/uploads/default-product.jpg' alt=product.name)
            
                                                    .card-body
                                                        h5.card-title(style="font-weight: bold;")= product.name
                                                        .d-flex.justify-content-between.align-items-center
                                                            span.h5.mb-0(style="font-style: italic;") Bs. #{Number(product.price).toFixed(2)}
            
                                                    .card-footer.bg-white.border-top-0
                                                        a.btn.btn-primary.w-100(href=`/product/${product.id}` style="background-color: #334488; border-color: #334488; color: white;") Ver detalles
            
                    // Controles de navegación del carrusel
                    .carousel-control-prev(href="#productCarousel" role="button" data-bs-slide="prev")
                        span.carousel-control-prev-icon(aria-hidden="true")
                        span.visually-hidden Anterior
                    .carousel-control-next(href="#productCarousel" role="button" data-bs-slide="next")
                        span.carousel-control-next-icon(aria-hidden="true")
                        span.visually-hidden Siguiente     
            section.mb-5
              .container-fluid.full-width-container
                .row.no-gutters
                  .col-md-3.col-sm-6.p-0
                    img.welcome-img(src="images/8/1.png" alt="Imagen 1")
                  .col-md-3.col-sm-6.p-0
                    img.welcome-img(src="images/8/6.png" alt="Imagen 2")
                  .col-md-3.col-sm-6.p-0
                    img.welcome-img(src="images/8/4.png" alt="Imagen 3")
                  .col-md-3.col-sm-6.p-0
                    img.welcome-img(src="images/8/7.png" alt="Imagen 4")
                  .col-md-3.col-sm-6.p-0
                    img.welcome-img(src="images/8/8.png" alt="Imagen 5")
                  .col-md-3.col-sm-6.p-0
                    img.welcome-img(src="images/8/3.png" alt="Imagen 6")
                  .col-md-3.col-sm-6.p-0
                    img.welcome-img(src="images/8/5.png" alt="Imagen 7")
                  .col-md-3.col-sm-6.p-0
                    img.welcome-img(src="images/8/2.png" alt="Imagen 8")    




            h2.text-center.mb-4(style="color: #334488; position: relative;") COMENTARIOS
            section.mb-5(style="background-color: #426ABC; ")
            
                
                .container-fluid
                    .row.align-items-center
                        // Columna de la imagen
                        .col-md-6
                            img.img-fluid.rounded(src="/images/imagen_comentarios.jpg" alt="Descripción de la imagen" style = "width:1000px; ")
                        // Columna del formulario
                        .col-md-6
                            form.comment-form(action="/submit-comment" method="POST")
                                .mb-3
                                    label(for="username") Nombre:
                                    input.form-control(type="text" id="username" name="username" placeholder="Escribe tu nombre" required)
                                .mb-3
                                    label(for="comment") Comentario:
                                    textarea.form-control(id="comment" name="comment" rows="3" placeholder="Escribe tu comentario aquí..." required)
                                button.btn.btn-primary(type="submit") Enviar comentario


        footer.py-4.mt-5(style="background-color: #334488; color: white;")
            .container
                .row
                    // Información de contacto
                    .col-md-4.text-center
                        h5(style="font-weight: bold; color: white;") Contáctanos
                        p.mb-1(style="margin: 0; color: white;") 📞 Teléfono: +1 (555) 123-4567
                        p.mb-1(style="margin: 0; color: white;") 📧 Email: contacto@gogoplay.com
                        p(style="margin: 0; color: white;") 📍 Dirección: Calle Principal #123, Ciudad Ejemplo
        
                    // Redes sociales
                    .col-md-4.text-center
                        h5(style="font-weight: bold; color: white;") Síguenos
                        a(href="https://facebook.com/gogoplay" target="_blank" style="margin-right: 15px; color: white; font-size: 1.5rem;")
                            i.bi.bi-facebook
                        a(href="https://instagram.com/gogoplay" target="_blank" style="margin-right: 15px; color: white; font-size: 1.5rem;")
                            i.bi.bi-instagram
                        a(href="https://tiktok.com/@gogoplay" target="_blank" style="color: white; font-size: 1.5rem;")
                            i.bi.bi-tiktok
        
                    // Horarios de atención
                    .col-md-4.text-center
                        h5(style="font-weight: bold; color: white;") Horarios de Atención
                        p.mb-1(style="color: white;") Lunes a Viernes: 9:00 AM - 6:00 PM
                        p.mb-1(style="color: white;") Sábado: 10:00 AM - 4:00 PM
                        p(style="color: white;") Domingo: Cerrado
        
                // Separador y derechos reservados
                hr.my-4(style="border-color: rgba(255, 255, 255, 0.5);")
                p.text-center.mb-0(style="color: white;") © 2024 GoGo Play. Todos los derechos reservados.
        
        
                script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js")